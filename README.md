# lamba-functions
Lambda Functions - How to copy files from one S3 bucket to another SFTP Bucket

Step 1: Create an IAM Role for Lambda
Go to the IAM Console:
Create a new role for Lambda with permissions to access S3.
Attach the AWSLambdaBasicExecutionRole and create a custom policy with permissions to s3:GetObject and s3:PutObject for your specific buckets.

Step 2: Create the Lambda Function
Go to the Lambda Console:
Click on "Create function."
Choose "Author from scratch."
Set the function name, choose the runtime (Python or Node.js), and select the IAM role you created.

Add the Function Code:
Please see Python script attached.

Step 3: Set Up S3 Event Notifications
Go to the Source Bucket:

Navigate to the S3 console and select the bucket where files will be uploaded.
Configure Event Notifications:

Go to the "Properties" tab.
Find the "Event notifications" section and click "Create event notification."
Set a name for the event notification.
For "Event types," choose "All object create events."
For "Destination," select "Lambda function" and choose the Lambda function you created.

Step 4: Test the Setup
Upload a File:

Upload a file to the subfolder in the source S3 bucket (e.g., subfolder/yourfile.txt).
Check the Destination:

Verify that the file has been copied to the specified subfolder in the destination bucket (e.g., subfolder/yourfile.txt).

Step 5: Monitor and Troubleshoot

Use CloudWatch Logs to view logs generated by your Lambda function for any errors or debugging.


Optional: Security Best Practices
Consider limiting the Lambda functionâ€™s permissions to only the specific source and destination buckets.
Use environment variables in Lambda to store bucket names and subfolder paths for easier configuration management.
By following these steps, you can automate the copying of files from a subfolder in one S3 bucket to a subfolder in another S3 bucket.


